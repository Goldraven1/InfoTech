# API Reference

## Python-JavaScript взаимодействие через Eel

### Серверные функции (Python)

Все функции, доступные для вызова из JavaScript, должны быть помечены декоратором `@eel.expose`.

#### get_data()

Получает все записи из таблицы users.

**Параметры**: Нет

**Возвращает**: Список кортежей с данными из таблицы users. Каждый кортеж представляет собой одну запись.

**Пример вызова из JavaScript**:
```javascript
const data = await eel.get_data()();
```

#### Потенциальные функции для реализации

##### add_record(name, description, ...)

Добавляет новую запись в базу данных.

**Параметры**:
- `name` (string): Имя записи
- `description` (string): Описание записи
- Возможные дополнительные параметры

**Возвращает**: Объект с информацией об успешности операции и ID новой записи.

**Пример вызова из JavaScript**:
```javascript
const result = await eel.add_record("Новое имя", "Новое описание")();
```

##### update_record(id, name, description, ...)

Обновляет существующую запись.

**Параметры**:
- `id` (int): ID записи для обновления
- `name` (string): Новое имя записи
- `description` (string): Новое описание записи
- Возможные дополнительные параметры

**Возвращает**: Объект с информацией об успешности операции.

**Пример вызова из JavaScript**:
```javascript
const result = await eel.update_record(1, "Обновленное имя", "Обновленное описание")();
```

##### delete_record(id)

Удаляет запись из базы данных.

**Параметры**:
- `id` (int): ID записи для удаления

**Возвращает**: Объект с информацией об успешности операции.

**Пример вызова из JavaScript**:
```javascript
const result = await eel.delete_record(1)();
```

##### search_records(query)

Поиск записей по заданному запросу.

**Параметры**:
- `query` (string): Поисковый запрос

**Возвращает**: Список кортежей с найденными данными.

**Пример вызова из JavaScript**:
```javascript
const searchResults = await eel.search_records("поисковый запрос")();
```

##### export_data(format)

Экспортирует данные в выбранном формате.

**Параметры**:
- `format` (string): Формат для экспорта (например, "csv", "json")

**Возвращает**: Путь к экспортированному файлу или URL для скачивания.

**Пример вызова из JavaScript**:
```javascript
const exportUrl = await eel.export_data("csv")();
```

### Клиентские функции (JavaScript)

JavaScript-функции также могут быть вызваны из Python-кода с помощью Eel.

#### Создание функции для вызова из Python

```javascript
// В JavaScript
eel.expose(showNotification);
function showNotification(message) {
    alert(message);
    return true; // Возвращаемые значения передаются обратно в Python
}
```

```python
# В Python
result = eel.showNotification("Ваше сообщение")()  # Вызов JS-функции с параметром
```

#### Потенциальные функции для реализации

##### updateUI()

Обновляет пользовательский интерфейс.

**Пример вызова из Python**:
```python
eel.updateUI()()
```

##### showError(message)

Отображает сообщение об ошибке.

**Параметры**:
- `message` (string): Текст сообщения об ошибке

**Пример вызова из Python**:
```python
eel.showError("Произошла ошибка при подключении к базе данных")()
```

## REST API (опциональное расширение)

Для обеспечения доступа к функциям приложения через REST API, можно добавить следующие эндпоинты:

### GET /api/records

Получение списка записей.

**Параметры запроса**:
- `search` (опционально): Строка поиска
- `limit` (опционально): Ограничение количества результатов
- `offset` (опционально): Смещение для пагинации

**Пример ответа**:
```json
{
  "records": [
    {"id": 1, "name": "Имя 1", "description": "Описание 1"},
    {"id": 2, "name": "Имя 2", "description": "Описание 2"}
  ],
  "total": 2
}
```

### POST /api/records

Создание новой записи.

**Тело запроса**:
```json
{
  "name": "Новое имя",
  "description": "Новое описание"
}
```

**Пример ответа**:
```json
{
  "success": true,
  "id": 3
}
```

### PUT /api/records/{id}

Обновление существующей записи.

**Тело запроса**:
```json
{
  "name": "Обновленное имя",
  "description": "Обновленное описание"
}
```

**Пример ответа**:
```json
{
  "success": true
}
```

### DELETE /api/records/{id}

Удаление записи.

**Пример ответа**:
```json
{
  "success": true
}
```
